# 快速开始

## 启动服务器

```bash
# 构建并运行
cargo run --release

# 或者直接运行已编译的程序
.\target\release\web-totp.exe
```

服务器将在 http://127.0.0.1:18007 上启动

## 首次使用

1. **打开浏览器访问** http://127.0.0.1:18007

2. **使用默认账户登录**
   - 用户名: `admin`
   - 密码: `admin`

3. **强烈建议首次登录后立即修改密码**
   - 点击"设置"标签
   - 在"修改密码"部分更改密码

## 主要功能使用

### 1. 添加 2FA 账户

1. 在主界面点击"添加 2FA"按钮
2. 填写信息:
   - **名称**: 给这个账户起个名字（如：Google、GitHub、AWS）
   - **发行者**: 服务提供商名称
   - **密钥**: 从服务提供商处获取的 Base32 格式密钥
3. 点击"添加"

### 2. 查看验证码

- 验证码自动每 30 秒刷新
- 进度条显示剩余有效时间
- 验证码为 6 位数字

### 3. 删除账户

1. 点击账户卡片右上角的删除图标（🗑️）
2. 在确认对话框中点击"删除"
3. ⚠️ 此操作无法撤销

### 4. 修改密码

1. 进入"设置"标签
2. 填写当前密码和新密码
3. 点击"更改密码"

### 5. 启用工具的 2FA 保护

1. 进入"设置"标签
2. 在"两步验证"部分点击"启用 2FA"
3. 会显示一个二维码和密钥
4. 使用 Google Authenticator 或其他 2FA 应用扫描二维码
5. 输入应用生成的 6 位验证码确认
6. 下次登录时需要输入 2FA 验证码

### 6. 禁用工具的 2FA

1. 进入"设置"标签
2. 点击"禁用 2FA"
3. 确认操作

## 如何获取服务的 2FA 密钥？

大多数服务在启用 2FA 时会显示：
1. 一个二维码
2. 一串文本密钥（通常是 Base32 格式）

**复制那串文本密钥**，粘贴到本工具的"密钥"输入框中。

### 示例服务设置

**GitHub:**
1. Settings → Password and authentication → Two-factor authentication
2. 点击 "Set up using an app"
3. 复制显示的密钥

**Google:**
1. 账户 → 安全性 → 两步验证
2. 选择"身份验证器应用"
3. 复制显示的密钥

**AWS:**
1. IAM → 用户 → 安全凭证
2. 分配 MFA 设备
3. 复制显示的密钥

## 数据存储

- 所有数据加密存储在 `data.enc` 文件中
- 请定期备份此文件
- 如果丢失此文件，所有数据将无法恢复

## 恢复默认设置

如果忘记密码或需要重置:
```bash
# 删除数据文件
Remove-Item data.enc

# 重启服务器，将创建新的数据文件
# 默认账户: admin/admin
```

⚠️ **警告**: 这将删除所有保存的 2FA 账户和设置

## 常见问题

**Q: 验证码不正确？**
A: 确保系统时间准确。TOTP 依赖精确的时间同步。

**Q: 可以在多台设备上使用吗？**
A: 可以，只需复制 `data.enc` 文件到其他设备。

**Q: 密钥格式错误？**
A: 确保密钥是 Base32 格式（只包含A-Z和2-7的字符）。

**Q: 如何备份？**
A: 复制 `data.enc` 文件到安全的地方。

## 安全建议

✅ 首次登录后立即修改默认密码
✅ 使用强密码（12位以上，包含大小写字母、数字、特殊字符）
✅ 为本工具启用 2FA 保护
✅ 定期备份 `data.enc` 文件
✅ 不要在公共网络上使用
⚠️ 不要与他人共享密钥和验证码
⚠️ 生产环境建议使用 HTTPS

## 技术说明

- 后端: Rust + actix-web
- 前端: HTML/CSS/JavaScript (无框架)
- 加密: XOR encryption (demo) / PBKDF2 密码哈希
- TOTP: 符合 RFC 6238 标准

---

享受安全的 2FA 体验！🔐

