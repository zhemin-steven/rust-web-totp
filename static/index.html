<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Web TOTP - 2FA чобчРЖх╖ехЕ╖</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <!-- шзгщФБщб╡щЭв -->
    <div id="unlock-page" class="page unlock-page">
        <div class="container">
            <div class="card unlock-card">
                <div class="language-selector">
                    <button class="lang-toggle" onclick="toggleLangMenu(event)" type="button" title="Language / шпншиА">ЁЯМР</button>
                    <div class="lang-menu" id="lang-menu">
                        <button onclick="window.setLanguage('zh-CN'); hideLangMenu();" class="lang-option active" id="lang-opt-zh" type="button">ЁЯЗиЁЯЗ│ ф╕нцЦЗ</button>
                        <button onclick="window.setLanguage('en-US'); hideLangMenu();" class="lang-option" id="lang-opt-en" type="button">ЁЯЗ║ЁЯЗ╕ English</button>
                    </div>
                </div>
                <div class="unlock-icon">ЁЯФТ</div>
                <h1 data-i18n="app_title">Web TOTP</h1>
                <p class="subtitle" data-i18n="unlock_title">цХ░цНох║Ух╖▓хКахпЖ</p>
                <p class="unlock-hint" data-i18n="unlock_hint">шп╖ш╛УхЕеф╕╗хпЖчаБшзгщФБ</p>
                <form id="unlock-form">
                    <div class="form-group">
                        <label for="master-password" data-i18n="master_password">ф╕╗хпЖчаБ</label>
                        <input type="password" id="master-password" name="master-password" 
                               placeholder="Enter master password" required autofocus>
                    </div>
                    <div id="unlock-error" class="error-message"></div>
                    <button type="submit" class="btn btn-primary btn-unlock" data-i18n="unlock_button">Unlock</button>
                </form>
                <p class="unlock-info" data-i18n="unlock_first_time">
                    ЁЯТб щжЦцмбф╜┐чФия╝Яш╛УхЕеф╕Аф╕кцЦ░хпЖчаБцЭехИЫх╗║цХ░цНох║У
                </p>
            </div>
        </div>
    </div>

    <!-- чЩ╗х╜Хщб╡щЭв -->
    <div id="login-page" class="page" style="display: none;">
        <div class="container">
            <div class="card">
                <div class="language-selector">
                    <button class="lang-toggle" onclick="toggleLangMenu(event)" type="button" title="Language / шпншиА">ЁЯМР</button>
                    <div class="lang-menu" id="lang-menu-login">
                        <button onclick="window.setLanguage('zh-CN'); hideLangMenu();" class="lang-option active" id="lang-opt-zh-login" type="button">ЁЯЗиЁЯЗ│ ф╕нцЦЗ</button>
                        <button onclick="window.setLanguage('en-US'); hideLangMenu();" class="lang-option" id="lang-opt-en-login" type="button">ЁЯЗ║ЁЯЗ╕ English</button>
                    </div>
                </div>
                <div class="logo-container">
                    <div class="logo-shield">ЁЯЫбя╕П</div>
                    <h1>Web TOTP</h1>
                </div>
                <p class="subtitle" data-i18n="app_subtitle">хоЙхЕичЪДхПМхЫач┤ашодшпБчобчРЖх╖ехЕ╖</p>
                <form id="login-form">
                    <div class="form-group">
                        <label for="username" data-i18n="username">чФицИ╖хРН</label>
                        <input type="text" id="username" name="username" value="admin" required>
                    </div>
                    <div class="form-group">
                        <label for="password" data-i18n="password">хпЖчаБ</label>
                        <input type="password" id="password" name="password" value="admin" required>
                    </div>
                    <div id="totp-input-group" class="form-group" style="display: none;">
                        <label for="totp-code" data-i18n="totp_code">2FA щкМшпБчаБ</label>
                        <input type="text" id="totp-code" name="totp-code" maxlength="6" pattern="\d{6}">
                    </div>
                    <div id="login-error" class="error-message"></div>
                    <button type="submit" class="btn btn-primary" data-i18n="login_button">чЩ╗х╜Х</button>
                </form>
            </div>
        </div>
    </div>

    <!-- ф╕╗щб╡щЭв -->
    <div id="main-page" class="page" style="display: none;">
        <nav class="navbar">
            <div class="nav-content">
                <h2>Web TOTP</h2>
                <div class="nav-links">
                    <a href="#" class="nav-link active" data-tab="totp-list" data-i18n="totp_list">2FA хИЧшби</a>
                    <a href="#" class="nav-link" data-tab="settings" data-i18n="settings">шо╛ч╜о</a>
                    <div class="language-selector nav-lang-selector">
                        <button class="lang-toggle" onclick="toggleLangMenu(event)" type="button" title="Language / шпншиА">ЁЯМР</button>
                        <div class="lang-menu" id="lang-menu-main">
                            <button onclick="window.setLanguage('zh-CN'); hideLangMenu();" class="lang-option active" id="lang-opt-zh-main" type="button">ЁЯЗиЁЯЗ│ ф╕нцЦЗ</button>
                            <button onclick="window.setLanguage('en-US'); hideLangMenu();" class="lang-option" id="lang-opt-en-main" type="button">ЁЯЗ║ЁЯЗ╕ English</button>
                        </div>
                    </div>
                    <button id="logout-btn" class="btn btn-secondary" data-i18n="logout">щААхЗ║</button>
                </div>
            </div>
        </nav>

        <div class="container main-content">
            <!-- 2FA хИЧшбицаЗчн╛щб╡ -->
            <div id="totp-list-tab" class="tab-content active">
                <div class="header-actions">
                    <h2 data-i18n="totp_list">2FA хИЧшби</h2>
                    <button id="add-totp-btn" class="btn btn-primary" data-i18n="add_totp">+ ц╖╗хКа 2FA</button>
                </div>
                
                <div id="totp-entries" class="totp-grid">
                    <!-- TOTP entries will be dynamically loaded here -->
                </div>

                <div id="empty-state" class="empty-state">
                    <p data-i18n="no_entries">цЪВцЧа 2FA цЭбчЫо</p>
                    <p class="subtitle" data-i18n="click_add">чВ╣хЗ╗ф╕КцЦ╣"ц╖╗хКа 2FA"цМЙщТох╝АхзЛ</p>
                </div>
            </div>

            <!-- шо╛ч╜оцаЗчн╛щб╡ -->
            <div id="settings-tab" class="tab-content">
                <h2 data-i18n="settings">шо╛ч╜о</h2>
                
                <div class="settings-section">
                    <h3 data-i18n="change_password_title">ф┐оцФ╣хпЖчаБ</h3>
                    <form id="change-password-form">
                        <div class="form-group">
                            <label for="old-password" data-i18n="old_password">х╜УхЙНхпЖчаБ</label>
                            <input type="password" id="old-password" required>
                        </div>
                        <div class="form-group">
                            <label for="new-password" data-i18n="new_password">цЦ░хпЖчаБ</label>
                            <input type="password" id="new-password" required>
                        </div>
                        <div class="form-group">
                            <label for="confirm-password" data-i18n="confirm_password">чбошодцЦ░хпЖчаБ</label>
                            <input type="password" id="confirm-password" required>
                        </div>
                        <button type="submit" class="btn btn-primary" data-i18n="change_password_button">цЫ┤цФ╣хпЖчаБ</button>
                    </form>
                </div>

                <div class="settings-section">
                    <h3 data-i18n="two_factor_auth">ф╕дцнещкМшпБ</h3>
                    <p data-i18n="enable_2fa_desc">ф╕║цндх╖ехЕ╖хРпчФиф╕дцнещкМшпБф╗ехвЮх╝║хоЙхЕицАз</p>
                    <div id="2fa-status" class="status-display">
                        <span id="2fa-status-text"><span data-i18n="status">чК╢цАБ</span>: <span id="2fa-status-value" data-i18n="disabled">цЬкхРпчФи</span></span>
                        <button id="toggle-2fa-btn" class="btn btn-primary" data-i18n="enable_2fa">хРпчФи 2FA</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- ц╖╗хКа TOTP цибцАБцбЖ -->
    <div id="add-totp-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 data-i18n="add_totp_title">ц╖╗хКа 2FA</h3>
                <button class="close-btn">&times;</button>
            </div>
            <form id="add-totp-form">
                <div class="form-group">
                    <label for="entry-name" data-i18n="entry_name">хРНчз░</label>
                    <input type="text" id="entry-name" data-i18n-placeholder="name_placeholder" placeholder="ф╛ЛхжВ: Google" required>
                </div>
                <div class="form-group">
                    <label for="entry-issuer" data-i18n="entry_issuer">хПСшбМшАЕ</label>
                    <input type="text" id="entry-issuer" data-i18n-placeholder="issuer_placeholder" placeholder="ф╛ЛхжВ: Google" required>
                </div>
                <div class="form-group">
                    <label for="entry-secret" data-i18n="entry_secret">хпЖщТе</label>
                    <input type="text" id="entry-secret" data-i18n-placeholder="secret_placeholder" placeholder="ш╛УхЕехпЖщТе" required>
                </div>
                <div class="modal-actions">
                    <button type="button" class="btn btn-secondary cancel-btn" data-i18n="cancel">хПЦц╢И</button>
                    <button type="submit" class="btn btn-primary" data-i18n="add">ц╖╗хКа</button>
                </div>
            </form>
        </div>
    </div>

    <!-- 2FA шо╛ч╜оцибцАБцбЖ -->
    <div id="2fa-setup-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>хРпчФиф╕дцнещкМшпБ</h3>
                <button class="close-btn">&times;</button>
            </div>
            <div id="2fa-setup-content">
                <p>ф╜┐чФи Google Authenticator цИЦхЕ╢ф╗Ц 2FA х║ФчФицЙлцППцндф║Мч╗┤чаБя╝Ъ</p>
                <div class="qr-code-container">
                    <img id="2fa-qr-code" src="" alt="QR Code">
                </div>
                <div class="form-group">
                    <label>цИЦцЙЛхКиш╛УхЕехпЖщТе:</label>
                    <input type="text" id="2fa-secret-display" readonly>
                </div>
                <form id="verify-2fa-form">
                    <div class="form-group">
                        <label for="verify-code">ш╛УхЕещкМшпБчаБф╗ечбошод:</label>
                        <input type="text" id="verify-code" maxlength="6" pattern="\d{6}" required>
                    </div>
                    <div class="modal-actions">
                        <button type="button" class="btn btn-secondary cancel-btn">хПЦц╢И</button>
                        <button type="submit" class="btn btn-primary">щкМшпБх╣╢хРпчФи</button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- хИащЩдчбошодцибцАБцбЖ -->
    <div id="delete-confirm-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>чбошодхИащЩд</h3>
                <button class="close-btn">&times;</button>
            </div>
            <p>чбохоЪшжБхИащЩдш┐Щф╕к 2FA цЭбчЫохРЧя╝ЯцндцУНф╜ЬцЧац│ХцТдщФАуАВ</p>
            <div class="modal-actions">
                <button type="button" class="btn btn-secondary cancel-btn">хПЦц╢И</button>
                <button type="button" id="confirm-delete-btn" class="btn btn-danger">хИащЩд</button>
            </div>
        </div>
    </div>

    <!-- чжБчФи 2FA чбошодцибцАБцбЖ -->
    <div id="disable-2fa-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>чжБчФиф╕дцнещкМшпБ</h3>
                <button class="close-btn">&times;</button>
            </div>
            <p>чжБчФиф╕дцнещкМшпБщЬАшжБщкМшпБцВичЪДш║лф╗╜</p>
            <form id="disable-2fa-form">
                <div class="form-group">
                    <label for="disable-2fa-password">х╜УхЙНхпЖчаБ</label>
                    <input type="password" id="disable-2fa-password" required>
                </div>
                <div class="form-group">
                    <label for="disable-2fa-code">х╜УхЙН 2FA щкМшпБчаБ</label>
                    <input type="text" id="disable-2fa-code" maxlength="6" pattern="\d{6}" required>
                </div>
                <div class="modal-actions">
                    <button type="button" class="btn btn-secondary cancel-btn">хПЦц╢И</button>
                    <button type="submit" class="btn btn-danger">чбошодчжБчФи</button>
                </div>
            </form>
        </div>
    </div>

    <script src="i18n.js"></script>
    <script src="app.js"></script>
</body>
</html>

